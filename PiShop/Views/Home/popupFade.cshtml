@model Domain.Product

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="~/css/style.css">
    <meta name="viewport" content="width=device-width" , initial-scale=1>
   

    @*<link rel="stylesheet" type="text/css" href="~/js/slick-1.8.1/slick/slick.css" />
    <link rel="stylesheet" type="text/css" href="~/js/slick-1.8.1/slick/slick-theme.css" />*@

    @*<link href="https://fonts.googleapis.com/css?family=Merienda|Neucha|Roboto&display=swap" rel="stylesheet">



        <link rel="stylesheet" type="text/css" href="~/js/slick-1.8.1/slick/slick.css" />
        <link rel="stylesheet" type="text/css" href="~/js/slick-1.8.1/slick/slick-theme.css" />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>*@

</head>
<body>

    <div class="popup-fade">

        <form asp-controller="Cart" asp-action="AddToCart" id="popupFadeForm" method="get">
            @*<div class="overflow2">*@
            <div class="overflow2">
                <div class="popup">

                    <a class="popup-close" href="#"> <img src="~/images/krestik.jpg" alt=""></a>

                    <div class="item_pizham">

                        <div class="info_title AdaptiveDisplay displayNone">@Model.Name</div>

                        <div class="theFirstBlock">
                            @if (System.IO.File.Exists($"{Environment.CurrentDirectory}/wwwroot/images/Каталог/Girls/{Model.Image2Address}"))
                            {
                                @*<div class="First">
                    <div class="picture Show"><img class="block" src="~/images/Каталог/Girls/@Model.Address" alt=""></div>
                    <div class="pictureSecond Show"><img class="blockSecond" src="~/images/Каталог/Girls/@Model.Image2Address" alt=""></div>
                </div>
                <div class="Second displayNone">
                    <div class="picture NotShow "><img class="block" src="~/images/Каталог/Girls/@Model.Image2Address" alt=""></div>
                    <div class="pictureSecond   NotShow"><img class="blockSecond" src="~/images/Каталог/Girls/@Model.Address" alt=""></div>
                </div>*@
                                <div class="First">
                                    <div class="picture Show"><img class="block" src="~/images/Каталог/Girls/@Model.Address" alt="первая картинка 1"></div>
                                    <div class="pictureSecond Show"><img class="blockSecond" src="~/images/Каталог/Girls/@Model.Image2Address" alt="Вторая картинка 1"></div>
                                </div>
                                <div class="Second displayNone">
                                    <div class="picture NotShow "><img class="block" src="~/images/Каталог/Girls/@Model.Image2Address" alt="первая картинка 2"></div>
                                    <div class="pictureSecond   NotShow"><img class="blockSecond" src="~/images/Каталог/Girls/@Model.Address" alt="Вторая картинка 2"></div>

                                </div>
                            }
                            else
                            {
                                <div class="picture First Show"><img class="block" src="~/images/Каталог/Girls/@Model.Address" style="max-height:initial !important;" alt="@Model.Name"></div>@*большая*@
                            }
                            @*<div class="price" style="width:initial;">2000Р</div>*@
                            <div class="priceMain PriceMainDetail" style="margin-top: 35px !important;">
                                <div class="newPricePopup"> @Model.Price&#1056;</div>
                                @if (Model.Price < Model.PriceWithoutSales)
                                {
                                    <div class="oldPrice">@Model.PriceWithoutSales&#1056;</div>
                                }

                            </div>
                            <div class="chooseSize AdaptiveDisplay displayNone">Выберите размер</div>
                            <input type="number" name="Id" value="@Model.Id" style="display:none">
                            <div class="radio AdaptiveDisplay displayNone">
                                <label>
                                    <input class="radioFade" type="radio" name="size" value="XS-S"> <span>XS-S</span>
                                </label>
                                <label>
                                    <input class="radioFade" type="radio" name="size" value="M"><span style="padding:5px 16px !important;">M</span>
                                </label>
                                <label>
                                    <input class="radioFade" type="radio" name="size" value="L"><span style="padding:5px 16px !important;">L</span>
                                </label>
                            </div>
                            <div class="animate">
                                <button class="btn btn-add addToCart AddPopup" type="submit">ДОБАВИТЬ В КОРЗИНУ</button>
                                <a class="btn btn-add goToCart popup-cart-open AddPopup" href="/Cart/Cart">ПЕРЕЙТИ В КОРЗИНУ</a>
                                @*<a class="btn btn-add addToCart" type="submit">ДОБАВИТЬ В КОРЗИНУ</a>*@
                                <div class="paket"><img src="~/images/Корзина/trash.png" alt="покупка"></div>
                            </div>

                            <header>
                                <div id="dialogContentpopupModalText" class="modal-dialog"></div>
                            </header>

                        </div>
                        <div class="info Display">
                            <div class="info_title ">@Model.Name</div>
                            <div class="info-text">
                                <div class="info_text_item">
                                    @switch (Model.Category)
                                    {
                                        case "флис":<img class="pointer" src="~/images/point.png" alt="Пункт"><div class="info_text_text">Материал: флис </div> break;
                                        case "gift": <ul class="delivery_ul" style="margin-left: 12px; "> <li class="delivery_line"><scan style="font-weight:600;">Добавь</scan> подарочную упаковку в свой заказ! Тогда сюрприз порадует её ещё больше!</li> <li class="delivery_line">Подарочная упаковка отлично @Html.Raw(Model.Info)</li> @*<li class="delivery_line">Добавь подарочную упаковку в свой заказ! Тогда сюрприз порадует её ещё больше!</li>*@</ul>break;
                                    default: <img class="pointer" src="~/images/point.png" alt="Пункт"> <div class="info_text_text">Материал: шёлк Армани </div>break;
                                }

                                </div>

                                @switch (Model.Category)
                                {
                                    case "флис":
                                        <div class="info_text_item">
                                            <img class="pointer" src="~/images/point.png" alt="Пункт 2">
                                            <div class="info_text_text">Размерная сетка </div>
                                        </div>
                                        <div class="info_table"><img src="~/images/PhlisPazmer2.PNG" alt="Размерная сетка2"></div> break;
                                    case "gift":
                                        <div class="info_text_item">
                                            <ul class="delivery_ul" style="margin-left: 12px; ">  <li class="delivery_line">Размер: @Model.Info2</li> @*<li class="delivery_line">Добавь подарочную упаковку в свой заказ! Тогда сюрприз порадует её ещё больше!</li>*@</ul>
                                        </div>
                                        break;
                                    default:
                                        <a class="PopupPazmer">Размерная сетка </a>
                                        <div class="info_text_item">
                                            <img class="pointer" src="~/images/point.png" alt="Пункт 2">
                                            <div class="info_text_text">Размерная сетка </div>
                                        </div>
                                        <div class="info_table"><img src="~/images/pazmer.jpg" alt="Размерная сетка"></div>break;
                                }
                                <input type="number" name="Id" value="@Model.Id" style="display:none">
                                @if (Model.Category != "gift")
                                {
                                    <div class="chooseSize">Выберите размер</div>

                                    <div class="radio">
                                        <label>
                                            <input class="radioFade" type="radio" name="size" value="XS-S"> <span>XS-S</span>
                                        </label>
                                        <label>
                                            <input class="radioFade" type="radio" name="size" value="M"><span style="padding:5px 16px !important;">M</span>
                                        </label>
                                        <label>
                                            <input class="radioFade" type="radio" name="size" value="L"><span style="padding:5px 16px !important;">L</span>
                                        </label>
                                    </div>
                                }
                            </div>
                        </div>
                        <div class="info-text">@Html.Raw(Model.DescriptionPopup)</div>
                            <div class="info AdaptiveDisplay displayNone">
                                <div class="info-text">
                                    <div class="info_text_item">
                                        @switch (Model.Category)
                                        {
                                            case "флис":
                                                <div class="info_text_item">
                                                    <img class="pointer" src="~/images/point.png" alt="Пункт 2">
                                                    <div class="info_text_text">Размерная сетка </div>
                                                </div>
                                                <div class="info_table"><img src="~/images/PhlisPazmerPhone.jpg" alt="Размерная сетка2"></div> break;
                                            case "gift":
                                                <div class="info_text_item">
                                                    <ul class="delivery_ul" style="margin-left: 12px; ">  <li class="delivery_line">Размер: @Model.Info2</li> @*<li class="delivery_line">Добавь подарочную упаковку в свой заказ! Тогда сюрприз порадует её ещё больше!</li>*@</ul>
                                                </div>
                                                break;
                                            default:
                                                <a class="PopupPazmer">Размерная сетка </a>
                                                <div class="info_text_item">
                                                    <img class="pointer" src="~/images/point.png" alt="Пункт 2">
                                                    <div class="info_text_text">Размерная сетка </div>
                                                </div>
                                                <div class="info_table"><img src="~/images/pazmerPhone.jpg" alt="Размерная сетка"></div>break;
                                        }

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
            </div>
            @*</div>*@
        </form>
    </div>


    <script type="text/javascript">
        $(".PopupPazmer").click(function (e) {
            e.preventDefault();
            //var url = "/Cart/AddToCart/";  свяжется с вами в течение      3 минут
            $.get("/home/ModalText?text=размерная сетка&id=размерная сетка", function (data) {
                $('#dialogContentpopupModalText').html(data);
                $('.popup-ModalText').fadeIn();
            });

            //return true;
        });
    </script>

    <script>
        $(document).ready(function ($) {

            $('.popup-close').click(function () {
                if (innerWidth < 421) {
                    document.body.style.overflow = "auto";
                }
                $(this).parents('.popup-fade').fadeOut();
                return false;
            });
            $(document).keydown(function (e) {
                if (e.keyCode === 27) {
                    e.stopPropagation();
                    if (innerWidth < 421) {
                        document.body.style.overflow = "auto";
                    }
                    $('.popup-fade').fadeOut();

                }

            });
            $('.popup-fade').click(function (e) {
                if ($(e.target).closest('.popup').length == 0) {
                    if (innerWidth < 421) {
                        document.body.style.overflow = "auto";
                    }
                    $(this).fadeOut();

                }
            });
        });
    </script>
    @if (Model.Category != "gift")
    {
        <script>
            $("#popupFadeForm").submit(function (e) {
                e.preventDefault();
                flag = 0;
                $('input[type=radio]').each(function () {
                    if ($(this).prop('checked') && $(this).hasClass("radioFade")) {
                        flag = 1;
                    }
                });
                if (flag == 1) {
                    var url = "/Cart/AddToCart/";

                    $.ajax({
                        type: "GET",
                        url: url,
                        data: $("#popupFadeForm").serialize(),
                    });

                    var that = $(".btn-add").closest('.animate').find('img');
                    var bascket = $(".korzinaToPacket");
                    var w = that.width();
                    that.clone().css({
                        'width': w
                        , 'position': 'absolute'
                        , 'z-index': '9999'
                        , top: that.offset().top
                        , left: that.offset().left
                    }).appendTo("body").animate({
                        opacity: 0.1
                        , left: bascket.offset()['left']
                        , top: bascket.offset()['top']
                        , width: 20
                    }, 1500, function () {
                        $(this).remove();
                    });
                }//if
                else {
                    //$(".chooseSize").addClass("textRed");
                    $.get("/home/modaltext/", function (data) {
                        $('#dialogContentpopupModalText').html(data);
                        $('.popup-ModalText').fadeIn();
                    });
                }
            });

        </script>
    }
    else
    {
        <script>
            $("#popupFadeForm").submit(function (e) {
                e.preventDefault();

                var url = "/Cart/AddToCart/";

                $.ajax({
                    type: "GET",
                    url: url,
                    data: $("#popupFadeForm").serialize(),
                });

                var that = $(".btn-add").closest('.animate').find('img');
                var bascket = $(".korzinaToPacket");
                var w = that.width();
                that.clone().css({
                    'width': w
                    , 'position': 'absolute'
                    , 'z-index': '9999'
                    , top: that.offset().top
                    , left: that.offset().left
                }).appendTo("body").animate({
                    opacity: 0.1
                    , left: bascket.offset()['left']
                    , top: bascket.offset()['top']
                    , width: 20
                }, 1500, function () {
                    $(this).remove();
                });

            });

        </script>
    }
    <script>
        $(document).ready(function ($) {
            $('.popup-cart-open').click(function (e) {
                e.preventDefault();
                $.get(this.href, function (data) {
                    $('#dialogContentpopupCart').html(data);
                    $('.popup-cart').fadeIn();
                    $('.popup-fade').fadeOut();
                });
                if (innerWidth < 421) {
                    document.body.style.overflowY = "hidden";
                }
                //document.body.style.overflow = "hidden";
                return false;
            });
            $('.popup-cart-close').click(function () {
                $(this).parents('.popup-cart').fadeOut();
                document.body.style.overflow = "auto";
                return false;
            });
            $(document).keydown(function (e) {
                if (e.keyCode === 27) {
                    e.stopPropagation();
                    $('.popup-cart').fadeOut();
                }
                document.body.style.overflow = "auto";
            });
            $('.popup-cart').click(function (e) {
                if ($(e.target).closest('.cart').length == 0) {
                    $(this).fadeOut();
                }
                document.body.style.overflow = "auto";
            });
        });
    </script>

    @*изменить структуру для телефона*@
    <script type="text/javascript">
        if (innerWidth < 420) {
            $(".Display").toggleClass("displayNone"); //addClass("displayNone"); // .toggleClass("displayNone");
            console.log(4);
            $(".AdaptiveDisplay").toggleClass("displayNone"); //.remove("displayNone"); //.toggleClass("displayNone");

            // $(".popup").toggleClass("overflow2");
            $(".popup").addClass("overflow2");
            $(".info-text").css('margin-top', '20px');
        }
    </script>

    @*модальное окно выберите размер (закрыть)*@
    <script>

        $(document).ready(function ($) {

            $('.ModalText-close').click(function () {
                $(this).parents('.popup-ModalText').fadeOut();
                return false;
            });
            $(document).keydown(function (e) {
                if (e.keyCode === 27) {
                    e.stopPropagation();
                    $('.popup-ModalText').fadeOut();
                }
            });
            $('.popup-ModalText').click(function (e) {
                if ($(e.target).closest('.ModalText').length == 0) {
                    $(this).fadeOut();
                }
            });
        });
    </script>


    @*открытие второй картинки*@

    <script>
        $(document).ready(function ($) {
            $('.pictureSecond').click(function (e) {
                // $(this).closest('div').toggleClass('displayNone')
                $('.First').toggleClass('displayNone');
                $('.Second').toggleClass('displayNone');
            });
        });
    </script>


    @*увеличение и уменьшение картинки*@
    <script>
        $(document).ready(function ($) {
            if (innerWidth > 420) {
                $('.picture').click(function (e) {
                    $(this).toggleClass('Zoom-out');
                    //$('.First').toggleClass('displayNone');
                    //$('.Second').toggleClass('displayNone');
                });
            }
        });
    </script>

</body>
